{"version":3,"file":"static/webpack/static\\development\\pages\\podcasts.js.b44bce7141a4a7f9b2f3.hot-update.js","sources":["webpack:///./pages/podcasts.js"],"sourcesContent":["import React from 'react';\r\nimport Layout from './components/layout';\r\nimport styles from './scss/app.scss';\r\nimport fetch from 'isomorphic-unfetch';\r\nimport PodcastCard from './components/podcastCard';\r\n\r\nclass Podcasts extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.searchBar = React.createRef();\r\n    // Load poecasts into local state, necessary for search bar functionality\r\n    this.state = { podcasts: props.podcasts, noMatch: true };\r\n  }\r\n  search = e => {\r\n    // What is currently typed in the search bar\r\n    const podcasts = [...this.state.podcasts];\r\n    const input = e.target.value.replace(/ /g, '').toLowerCase();\r\n    // Check all podcasts to and try to find a match\r\n    podcasts.forEach(podcast => {\r\n      // Podcast content to search for (podcast title)\r\n      const content = podcast.acf.podcast_title.replace(/ /g, '').toLowerCase();\r\n      // If podcast doesn't contain user input, remove from view\r\n      podcast.visible = content.includes(input) ? true : false;\r\n    });\r\n    this.setState(podcasts, match);\r\n  };\r\n  render() {\r\n    return (\r\n      <Layout>\r\n        <div className={styles.podcast_header}>\r\n          <h1>PODCAST</h1>\r\n        </div>\r\n        <div className={styles.search_bar}>\r\n          <input\r\n            ref={this.searchBar}\r\n            placeholder='Search podcasts'\r\n            onChange={this.search}\r\n            autoFocus\r\n          />\r\n        </div>\r\n        <div className={styles.podcast_cards}>\r\n          {/* Render podcasts based on search bar input */}\r\n          {this.state.noMatch && <h1>NO MATCH</h1>}\r\n          {this.state.podcasts.map(podcast => {\r\n            if (podcast.visible) {\r\n              return (\r\n                <PodcastCard\r\n                  key={podcast.slug}\r\n                  title={podcast.acf.podcast_title}\r\n                  date={podcast.acf.podcast_date}\r\n                  slug={podcast.slug}\r\n                />\r\n              );\r\n            }\r\n          })}\r\n        </div>\r\n      </Layout>\r\n    );\r\n  }\r\n}\r\n\r\nPodcasts.getInitialProps = async function() {\r\n  // Get ALL podcasts\r\n  const podcasts = await fetch(\r\n    'http://localhost/whalescout/wp-json/wp/v2/posts?categories=3'\r\n  ).then(podcasts => podcasts.json());\r\n\r\n  // Add a 'visible' property to each podcast for search bar functionality\r\n  podcasts.map(podcast => {\r\n    podcast.visible = true;\r\n  });\r\n  return { podcasts };\r\n};\r\n\r\nexport default Podcasts;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAOA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAjBA;AACA;AACA;AAAA;AAAA;AAAA;AAJA;AAKA;AACA;;;AAaA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAIA;;;;AApDA;AACA;AAsDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AACA;AALA;AAEA;AAIA;AACA;AACA;AACA;AATA;AAUA;AAAA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}